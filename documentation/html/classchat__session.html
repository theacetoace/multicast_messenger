<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Multicast_Messenger: chat_session Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Multicast_Messenger
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classchat__session-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">chat_session Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for chat_session:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classchat__session.png" usemap="#chat_session_map" alt=""/>
  <map id="chat_session_map" name="chat_session_map">
<area href="classchat__participant.html" alt="chat_participant" shape="rect" coords="0,0,273,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a32267410530f5700cdbdee26abd8d45e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchat__session.html#a32267410530f5700cdbdee26abd8d45e">chat_session</a> (tcp::socket socket, <a class="el" href="classchat__room.html">chat_room</a> &amp;room)</td></tr>
<tr class="separator:a32267410530f5700cdbdee26abd8d45e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5390a9206baa049c34c9d263e07ee14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchat__session.html#ab5390a9206baa049c34c9d263e07ee14">start</a> ()</td></tr>
<tr class="memdesc:ab5390a9206baa049c34c9d263e07ee14"><td class="mdescLeft">&#160;</td><td class="mdescRight">method adds participant to the room and starts reading  <a href="#ab5390a9206baa049c34c9d263e07ee14">More...</a><br /></td></tr>
<tr class="separator:ab5390a9206baa049c34c9d263e07ee14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65e33cb41a0be3016e670c13b42868b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchat__session.html#a65e33cb41a0be3016e670c13b42868b1">deliver</a> (const <a class="el" href="classchat__message.html">chat_message</a> &amp;msg)</td></tr>
<tr class="separator:a65e33cb41a0be3016e670c13b42868b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classchat__participant"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classchat__participant')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classchat__participant.html">chat_participant</a></td></tr>
<tr class="memitem:a7db46e3bf5fac9a60ce1b95dfb6620bb inherit pub_methods_classchat__participant"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchat__participant.html#a7db46e3bf5fac9a60ce1b95dfb6620bb">~chat_participant</a> ()</td></tr>
<tr class="separator:a7db46e3bf5fac9a60ce1b95dfb6620bb inherit pub_methods_classchat__participant"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a0147d59d67da4827361fec5b60c78d57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchat__session.html#a0147d59d67da4827361fec5b60c78d57">do_read_header</a> ()</td></tr>
<tr class="separator:a0147d59d67da4827361fec5b60c78d57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4effd3ca97bb432fb463123b2838051"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchat__session.html#ac4effd3ca97bb432fb463123b2838051">do_read_nick</a> ()</td></tr>
<tr class="separator:ac4effd3ca97bb432fb463123b2838051"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71196d51e0bac88b185a97759d89e74c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchat__session.html#a71196d51e0bac88b185a97759d89e74c">do_read_body</a> ()</td></tr>
<tr class="separator:a71196d51e0bac88b185a97759d89e74c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a726b9939416cb4d017a94b0a24892e18"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchat__session.html#a726b9939416cb4d017a94b0a24892e18">do_write</a> ()</td></tr>
<tr class="memdesc:a726b9939416cb4d017a94b0a24892e18"><td class="mdescLeft">&#160;</td><td class="mdescRight">method writes message to the socket  <a href="#a726b9939416cb4d017a94b0a24892e18">More...</a><br /></td></tr>
<tr class="separator:a726b9939416cb4d017a94b0a24892e18"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a1654842e96733498fc19d554bad9dbae"><td class="memItemLeft" align="right" valign="top">tcp::socket&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchat__session.html#a1654842e96733498fc19d554bad9dbae">socket_</a></td></tr>
<tr class="memdesc:a1654842e96733498fc19d554bad9dbae"><td class="mdescLeft">&#160;</td><td class="mdescRight">i/o socket of the participant  <a href="#a1654842e96733498fc19d554bad9dbae">More...</a><br /></td></tr>
<tr class="separator:a1654842e96733498fc19d554bad9dbae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3a8277abdfa731cb93f7e56af595efe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classchat__room.html">chat_room</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchat__session.html#aa3a8277abdfa731cb93f7e56af595efe">room_</a></td></tr>
<tr class="memdesc:aa3a8277abdfa731cb93f7e56af595efe"><td class="mdescLeft">&#160;</td><td class="mdescRight">room associated with participant  <a href="#aa3a8277abdfa731cb93f7e56af595efe">More...</a><br /></td></tr>
<tr class="separator:aa3a8277abdfa731cb93f7e56af595efe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a027bde1c8504f2dc7212cd82788b0135"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classchat__message.html">chat_message</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchat__session.html#a027bde1c8504f2dc7212cd82788b0135">read_msg_</a></td></tr>
<tr class="memdesc:a027bde1c8504f2dc7212cd82788b0135"><td class="mdescLeft">&#160;</td><td class="mdescRight">local cantainer for the read message  <a href="#a027bde1c8504f2dc7212cd82788b0135">More...</a><br /></td></tr>
<tr class="separator:a027bde1c8504f2dc7212cd82788b0135"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3be057c41aa4648e45797ca7c73b6f65"><td class="memItemLeft" align="right" valign="top">std::deque&lt; <a class="el" href="classchat__message.html">chat_message</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classchat__session.html#a3be057c41aa4648e45797ca7c73b6f65">write_msgs_</a></td></tr>
<tr class="memdesc:a3be057c41aa4648e45797ca7c73b6f65"><td class="mdescLeft">&#160;</td><td class="mdescRight">local cantainer for the send messages  <a href="#a3be057c41aa4648e45797ca7c73b6f65">More...</a><br /></td></tr>
<tr class="separator:a3be057c41aa4648e45797ca7c73b6f65"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>inherit from <a class="el" href="classchat__participant.html">chat_participant</a>, implements connecting, reading and writing messages; also allows to creating shared_pointer from this </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a32267410530f5700cdbdee26abd8d45e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">chat_session::chat_session </td>
          <td>(</td>
          <td class="paramtype">tcp::socket&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classchat__room.html">chat_room</a> &amp;&#160;</td>
          <td class="paramname"><em>room</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructor </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>is tcp socket to connect </td></tr>
    <tr><td class="paramname">room</td><td>is room associate with this participant </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a65e33cb41a0be3016e670c13b42868b1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void chat_session::deliver </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classchat__message.html">chat_message</a> &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>method delivers message to participant </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>is message to deliver </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classchat__participant.html#aefc27b5ddeac8ff1f73a9e4469a287ee">chat_participant</a>.</p>

</div>
</div>
<a class="anchor" id="a71196d51e0bac88b185a97759d89e74c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void chat_session::do_read_body </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>method implements the last reading part of the message if body is read method analyzes message type; if message is ususal then it is sent to all room participants, if message type is query then room is asked if nickname from the query is available and if it is not then message of nickname unavailability is sent </p>

</div>
</div>
<a class="anchor" id="a0147d59d67da4827361fec5b60c78d57"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void chat_session::do_read_header </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>method starts reading from message header if something is in the socket if header is read then method starts reading nickname </p>

</div>
</div>
<a class="anchor" id="ac4effd3ca97bb432fb463123b2838051"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void chat_session::do_read_nick </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>method continues reading by reading nickname from the socket if nickname is read the method starts reading message body </p>

</div>
</div>
<a class="anchor" id="a726b9939416cb4d017a94b0a24892e18"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void chat_session::do_write </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>method writes message to the socket </p>

</div>
</div>
<a class="anchor" id="ab5390a9206baa049c34c9d263e07ee14"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void chat_session::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>method adds participant to the room and starts reading </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a027bde1c8504f2dc7212cd82788b0135"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classchat__message.html">chat_message</a> chat_session::read_msg_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>local cantainer for the read message </p>

</div>
</div>
<a class="anchor" id="aa3a8277abdfa731cb93f7e56af595efe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classchat__room.html">chat_room</a>&amp; chat_session::room_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>room associated with participant </p>

</div>
</div>
<a class="anchor" id="a1654842e96733498fc19d554bad9dbae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tcp::socket chat_session::socket_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>i/o socket of the participant </p>

</div>
</div>
<a class="anchor" id="a3be057c41aa4648e45797ca7c73b6f65"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::deque&lt;<a class="el" href="classchat__message.html">chat_message</a>&gt; chat_session::write_msgs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>local cantainer for the send messages </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/Users/theacetoace/Documents/interview/src/<a class="el" href="tcpserv_8cpp.html">tcpserv.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Apr 4 2015 19:28:44 for Multicast_Messenger by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
